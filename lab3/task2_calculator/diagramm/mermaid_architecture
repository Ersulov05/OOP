classDiagram
direction TB

    namespace Group_Controller {
        class CalculatorController {
            -IdentificatorService m_identificatorService
	        -IdentificatorRepository m_identificatorRepository
            +HandleCalculatorCommand() void
        }

        class IdentificatorService {
            +CreateFunctionIdentificator() void
            +CreateVariableIdentificator() void
            +StoreVariableIdentificatorByValue() void
            +StoreVariableIdentificatorByIdentificator() void
            +GetIdentificatorValueData() IdentificatorValueData
            +GetVariableIdentificatorValuesData() IdentificatorValueData[]
            +GetFunctionIdentificatorValuesData() IdentificatorValueData[]
            -IdentificatorRepository m_identificatorRepository
        }

        class IdentificatorRepository {
            +StoreIdentificator() void
            +GetIdentificatorByName() Identificator
            +GetFunctions() map<string, IIdentificator*>
            +GetVariables() map<string, IIdentificator*>

            -map<string, IIdentificator> m_identificators
        }
    }
    namespace Group_DTO {
        class IdentificatorValueData {
            +string identificatorName
            +double value
        }
        class FunctionIdentificatorInput {
            +string identificatorName;
            +string firstIdentificatorName;
            +string operation;
            +string secondIdentificatorName;
        }
    }

    namespace Group_Identificator {
        class Identificator {
            +GetValue() double
            +GetName() string
            +SetValue() void
            +ResetCache() void
            +AddDependent() void
            +IsCacheValid() bool
            +GetSubscribes() set<Identificator>
        }

        class Function {
            -string name
            -Identificator left
            -Operation operation
            -Identificator right
        }

        class Variable {
            -string name
            -double value
        }
    }

    class CalculatorCommand {
        +CalculatorCommandType type
        +string bodyCommand
    }

    CalculatorController ..> CalculatorCommand
    CalculatorController *-- IdentificatorService
    IdentificatorService *-- IdentificatorRepository
    IdentificatorRepository *-- Identificator
    IdentificatorValueData <.. IdentificatorService
    FunctionIdentificatorInput <.. CalculatorController 
    FunctionIdentificatorInput <.. IdentificatorService 
    
    Identificator --|> Function
    Identificator --|> Variable
    %% IdentificatorService ..> FunctionIdentificator
    %% IdentificatorService ..> VariableIdentificator
